/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.2.1/userguide/tutorial_java_projects.html
 */

plugins {
    // Apply the java plugin to add support for Java
    id 'java'

    // Apply the application plugin to add support for building an application
    id 'application'

    id "com.github.johnrengelman.shadow" version "4.0.4"
}

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
    mavenLocal()
}

dependencies {

    annotationProcessor "io.micronaut:micronaut-inject-java:$micronautVersion"
    annotationProcessor "io.micronaut:micronaut-validation:$micronautVersion"

    compileOnly "io.micronaut:micronaut-inject-java:$micronautVersion"
    
    // This dependency is found on compile classpath of this component and consumers.
    implementation "io.monkey:monkey-inject:$monkeyVersion"
    implementation "io.monkey:monkey-runtime:$monkeyVersion"
    implementation "io.micronaut:micronaut-validation:$micronautVersion"
    implementation "io.micronaut.configuration:micronaut-hibernate-validator:$micronautVersion"
    implementation "io.micronaut:micronaut-http-client:$micronautVersion"
    implementation "io.micronaut:micronaut-http-server-netty:$micronautVersion"

    // Use JUnit test framework
    testImplementation "io.micronaut:micronaut-inject-java:$micronautVersion"
    testImplementation "junit:junit:4.12"
}

run.jvmArgs('-noverify', '-XX:TieredStopAtLevel=1')

// Define the main class for the application
mainClassName = "hello.world.App"

compileJava.options.compilerArgs += '-parameters'
compileTestJava.options.compilerArgs += '-parameters'

// Merging Service Files
shadowJar {
    mergeServiceFiles()
}
